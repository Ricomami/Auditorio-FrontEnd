<div class="container">
    <h1 class="mt-3">Editar artista.</h1>
    <a [routerLink]="['/artista']" href="#">Regresar</a>

    <form #formulario="ngForm" (ngSubmit)="actualizarArtista()" class="mt-5 needs-validation" novalidate enctype="multipart/form-data">
        <h4 class="my-4">ID de Artista: {{artista.id_artista}} </h4>
 
    <!-- NOMBRE -->
    <div class="mb-3">
      <label for="nombre" class="form-label">Nombre del Artista</label>
      <input
        type="text"
        id="nombre"
        name="nombre"
        [(ngModel)]="artista.nombre_artista"
        #nombre="ngModel"
        required
        minlength="3"
        class="form-control"
        [class.is-invalid]="nombre.invalid && nombre.touched"
        [class.is-valid]="nombre.valid && nombre.touched"
      />
      <div *ngIf="nombre.invalid && nombre.touched" class="invalid-feedback">
        El nombre es obligatorio y debe tener al menos 3 caracteres.
      </div>
    </div>
    
    <!-- Genero -->
    <div class="mb-3">
      <label for="genero" class="form-label">Genero</label>
      <input
        type="text"
        id="genero"
        name="genero"
        [(ngModel)]="artista.genero"
        #genero="ngModel"
        required
        minlength="3"
        class="form-control"
        [class.is-invalid]="genero.invalid && genero.touched"
        [class.is-valid]="genero.valid && genero.touched"
      />
      <div *ngIf="genero.invalid && genero.touched" class="invalid-feedback">
        El genero es obligatorio y debe tener al menos 3 caracteres.
      </div>
    </div>


    <!-- DESCRIPCION -->
    <div class="my-3">
      <label for="descripcion" class="form-label">Descripcion</label>
      <input
        type="text"
        id="descripcion"
        name="descripcion"
        [(ngModel)]="artista.descripcion"
        #descripcion="ngModel"
        required
        minlength="3"
        class="form-control"
        [class.is-invalid]="descripcion.invalid && descripcion.touched"
        [class.is-valid]="descripcion.valid && descripcion.touched"
      />
      <div *ngIf="descripcion.invalid && descripcion.touched" class="invalid-feedback">
        La descripci√≥n es obligatoria y debe tener al menos 3 caracteres.
      </div>
    </div>

    <!-- MOSTRAMOS LA IMAGEN PREVIA DEL ARTISTA -->
    <img 
          [src]="artista.imagen_artista" 
          alt="Artista" 
          loading="lazy" 
          width="450"
          style="object-fit: cover; border-radius: 8px;" />
          
    <!-- IMAGEN -->
    <div class="my-3">
      <label for="imagen" class="form-label">Imagen</label>
      <input
        type="file"
        id="imagen"
        name="imagen"
        accept="image/*"
        (change)="onFileSelected($event)"
        class="form-control"
      />
    </div>

    <!-- ESTADO -->
    <div class="mb-3">
      <label for="estado" class="form-label">Estado</label>
      <select
        id="estado"
        name="estado"
        [(ngModel)]="artista.estado"
        #estado="ngModel"
        required
        class="form-select"
        [class.is-invalid]="estado.invalid && estado.touched"
        [class.is-valid]="estado.valid && estado.touched"
      >
        <option value="" disabled selected>Seleccione un estado</option>
        <option value="Activo">Activo</option>
        <option value="Inactivo">Inactivo</option>
        <option value="Pendiente">Pendiente</option>
        <option value="Suspendido">Suspendido</option>
        <option value="Archivado">Archivado</option>
      </select>
      <div *ngIf="estado.invalid && estado.touched" class="invalid-feedback">
        Seleccione un estado v√°lido.
      </div>
    </div>

        <!-- BOT√ìN DE ENV√çO -->
    <button type="submit" class="btn btn-success w-100" [disabled]="formulario.invalid">
      Actualizar Artista
    </button>

    <!-- ALERTA DE √âXITO -->
    <div *ngIf="mensajeExito" class="alert alert-success mt-4" role="alert">
      üéâ {{ mensajeExito }}
    </div>

    <!-- ALERTA DE ERROR -->
    <div *ngIf="mensajeError" class="alert alert-danger mt-4" role="alert">
      ‚ö†Ô∏è {{ mensajeError }}
    </div>
    </form>
</div>